<?xml version="1.0" encoding="UTF-8"?>
<odoo >
<template id="account_report_invoice_inherited" inherit_id="account.report_invoice_document" >

    <xpath expr='//div[@name="shipping_address_block"]' position="replace">
        <div groups="account.group_delivery_invoice_address" name="shipping_address_block"> 
            <strong>عنوان الشحن:</strong>
            <div t-field="o.partner_shipping_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
        </div>
    </xpath>

    <xpath expr='//div[@name="address_not_same_as_shipping"]' position="replace">
        <div class="col-6" name="address_not_same_as_shipping">
            <t t-set="address">
                <address class="mb-0" t-field="o.partner_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                <div t-if="o.partner_id.vat" id="partner_vat_address_not_same_as_shipping">
                    <t t-if="o.company_id.account_fiscal_country_id.vat_label" t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                    <t t-else="">الرقم الضريبي</t>: <span t-field="o.partner_id.vat"/>
                </div>
            </t>
        </div>
    </xpath>

    

    <xpath expr='//div[@name="address_same_as_shipping"]' position="replace">
        <div class="offset-col-6 col-6" name="address_same_as_shipping">
                <t t-set="address">
                    <address class="mb-0" t-field="o.partner_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                    <div t-if="o.partner_id.vat" id="partner_vat_address_same_as_shipping">
                    <t t-if="o.company_id.account_fiscal_country_id.vat_label" t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                    <t t-else="">الرقم الضريبي</t>: <span t-field="o.partner_id.vat"/>
                </div>
            </t>
        </div>
    </xpath>

    <xpath expr='//div[@name="no_shipping"]' position="replace">
        <div class="offset-col-6 col-6" name="no_shipping">
            <t t-set="address">
                <address class="mb-0" t-field="o.partner_id" t-options='{"widget": "contact", "fields": ["address", "name"], "no_marker": True}'/>
                <div t-if="o.partner_id.vat" id="partner_vat_no_shipping">
                    <t t-if="o.company_id.account_fiscal_country_id.vat_label" t-esc="o.company_id.account_fiscal_country_id.vat_label" id="inv_tax_id_label"/>
                    <t t-else="">الرقم الضريبي</t>: <span t-field="o.partner_id.vat"/>
                </div>
            </t>
        </div>
    </xpath>


    <xpath expr='//div[@class="mt-5"]/div[@class="page"]/h2' position="replace">
         <h2>
            <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">فاتورة</span>
            <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'">مسودة فاتورة</span>
            <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'">الفاتورة الملغاة</span>
            <span t-if="o.move_type == 'out_refund'">اشعار دائن</span>
            <span t-if="o.move_type == 'in_refund'">مذكرة ائتمان البائع</span>
            <span t-if="o.move_type == 'in_invoice'">فاتورة البائع</span>
            <span t-if="o.name != '/'" t-field="o.name"/>
        </h2>

    </xpath>

    <xpath expr='//div[@id="informations"]' position="replace">
        <div id="informations" class="row mt-4 mb-4">
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date" name="invoice_date">
                <t t-if="o.move_type == 'out_invoice'"><strong>تاريخ الفاتورة:</strong></t>
                <t t-elif="o.move_type == 'out_refund'"><strong>تاريخ مذكرة الائتمان:</strong></t>
                <t t-elif="o.move_type == 'out_receipt'"><strong>تاريخ استلام:</strong></t>
                <t t-else=""><strong>تاريخ:</strong></t>
                <p class="m-0" t-field="o.invoice_date"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'" name="due_date">
                <strong>تاريخ الاستحقاق:</strong>
                <p class="m-0" t-field="o.invoice_date_due"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin" name="origin">
                <strong>مصدر:</strong>
                <p class="m-0" t-field="o.invoice_origin"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.partner_id.ref" name="customer_code">
                <strong>كود العميل:</strong>
                <p class="m-0" t-field="o.partner_id.ref"/>
            </div>
            <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                <strong>مرجع:</strong>
                <p class="m-0" t-field="o.ref"/>
            </div>
        </div>

    </xpath>

   

    <xpath expr='//table[@name="invoice_line_table"]/thead/tr' position="replace">
        <tr>
            <th name="th_description" class="text-start"><span>الوصف</span></th>
            <th name="th_quantity" class="text-end"><span>الكمية</span></th>
            <th name="th_priceunit" t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>سعر الوحده</span></th>
            <th name="th_price_unit" t-if="display_discount" t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                <span>خصم.%</span>
            </th>
            <th name="th_taxes" t-attf-class="text-start {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}"><span>الضرائب</span></th>
            <th name="th_subtotal" class="text-end">
                <span groups="account.group_show_line_subtotals_tax_excluded">السعر</span>
                <span groups="account.group_show_line_subtotals_tax_included">الاجمالي</span>
            </th>
        </tr>
    
    </xpath>
    <xpath expr="//table[@class='table table-sm table-borderless']//tr[@class='border-black fw-bold']" position="replace">
        <tr class="border-black fw-bold">
            <td>المبلغ المستحق</td>
            <td class="text-end">
                <span t-field="o.amount_residual"/>
            </td>
        </tr>
    </xpath>

    <xpath expr="//p[@name='payment_communication']" position="replace">
        <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference" name="payment_communication" class="mt-4">
              <b></b>
        </p>
    </xpath>    

</template>
</odoo>
